<UserControl x:Class="ZooManager.UI.Views.EnclosuresView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             mc:Ignorable="d" 
             d:DesignHeight="600" d:DesignWidth="800">
    <Grid Margin="24">
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="1*"/>
            <ColumnDefinition Width="1.5*"/>
        </Grid.ColumnDefinitions>

        <Border Style="{StaticResource Card}" Margin="0,0,12,0">
            <StackPanel>
                <TextBlock Text="Anlagen Übersicht" FontSize="20" FontWeight="Bold" Margin="0,0,0,16"/>
                    <StackPanel Margin="0,0,0,12">
                        <Button Content="+ Neue Anlage" Padding="8" Click="AddEnclosure_Click" Background="{StaticResource PrimaryBrush}" Foreground="White" FontWeight="Bold"/>
                        <Button Content="Anlage löschen" Padding="8" Margin="0,8,0,0" Click="DeleteEnclosure_Click" Background="#FFEBEE" Foreground="#D32F2F" BorderBrush="#FFCDD2"/>
                    </StackPanel>
                    <ListBox x:Name="EnclosureList" Height="380">
                    <!-- Das hier hat gefehlt: Ein Template für die Anzeige -->
                    <ListBox.ItemTemplate>
                        <DataTemplate>
                            <StackPanel Margin="0,4">
                                <TextBlock Text="{Binding Name}" FontSize="16" FontWeight="SemiBold"/>
                                <StackPanel Orientation="Horizontal">
                                    <TextBlock Text="{Binding ClimateType}" FontSize="12" Foreground="{StaticResource TextMutedBrush}"/>
                                    <TextBlock Text=" | Max: " FontSize="12" Foreground="{StaticResource TextMutedBrush}"/>
                                    <TextBlock Text="{Binding MaxCapacity}" FontSize="12" Foreground="{StaticResource TextMutedBrush}"/>
                                </StackPanel>
                            </StackPanel>
                        </DataTemplate>
                    </ListBox.ItemTemplate>
                </ListBox>
            </StackPanel>
        </Border>

            <!-- Rechte Seite -->
            <Grid Grid.Column="1">
                <!-- ANZEIGE- UND ZUWEISUNGSMODUS -->
                <ScrollViewer x:Name="EnclosureDetailsArea" Visibility="Visible">
                    <Border Style="{StaticResource Card}" Margin="0">
                        <StackPanel>
                            <TextBlock Text="Anlagen-Verwaltung (ANF2)" FontSize="20" FontWeight="Bold" Margin="0,0,0,16"/>
                            
                            <!-- Sektion: Tier zuordnen -->
                            <TextBlock Text="Tier in dieses Gehege umziehen:" FontWeight="SemiBold" Margin="0,0,0,8"/>
                            <Grid Margin="0,0,0,20">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="Auto"/>
                                </Grid.ColumnDefinitions>
                                <ComboBox x:Name="AllAnimalsSelector" DisplayMemberPath="Name" Margin="0,0,8,0"/>
                                <Button Grid.Column="1" Content="Zuweisen" Padding="15,5" Click="AssignAnimal_Click"/>
                            </Grid>

                            <Separator Margin="0,0,0,20"/>

                            <!-- Eigenschaften-Anzeige -->
                            <Label Content="Aktueller Klimatyp:"/>
                            <TextBlock Text="{Binding SelectedItem.ClimateType, ElementName=EnclosureList}" FontWeight="Bold" Margin="5,0,0,10"/>

                            <TextBlock Text="Max. Kapazität:" VerticalAlignment="Center"/>
                            <TextBlock Text="{Binding SelectedItem.MaxCapacity, ElementName=EnclosureList}" FontWeight="Bold" Margin="5,0,0,10"/>

                            <TextBlock Text="* Das System prüft Klima, Platz und Wasserzugang gemäß ANF2."
                                       Foreground="{StaticResource TextMutedBrush}" FontSize="11" Margin="0,20,0,0" FontStyle="Italic"/>
                        </StackPanel>
                    </Border>
                </ScrollViewer>

                <!-- EDITOR-MODUS (Neue Anlage) -->
                <Border x:Name="EnclosureEditorArea" Style="{StaticResource Card}" Visibility="Collapsed" VerticalAlignment="Top" Margin="0">
                    <StackPanel>
                        <TextBlock Text="Neue Anlage anlegen" FontSize="22" FontWeight="Bold" Margin="0,0,0,20"/>
                        
                        <Label Content="Name der Anlage:"/>
                        <TextBox x:Name="NewEnclosureName" Margin="0,0,0,12" Padding="8"/>

                        <Label Content="Klimatyp:"/>
                        <ComboBox x:Name="NewEnclosureClimate" Margin="0,0,0,12" Padding="8">
                            <ComboBoxItem Content="Tropical"/>
                            <ComboBoxItem Content="Arid"/>
                            <ComboBoxItem Content="Polar"/>
                            <ComboBoxItem Content="Temperate"/>
                        </ComboBox>

                        <Label Content="Fläche (qm):"/>
                        <TextBox x:Name="NewEnclosureArea" Margin="0,0,0,12" Padding="8"/>

                        <Label Content="Max. Kapazität (Tiere):"/>
                        <TextBox x:Name="NewEnclosureCapacity" Margin="0,0,0,24" Padding="8"/>

                        <StackPanel Orientation="Horizontal" HorizontalAlignment="Right">
                            <Button Content="Abbrechen" Style="{StaticResource NavButton}" Margin="0,0,12,0" Click="CancelEnclosureEditor_Click"/>
                            <Button Content="Speichern" Padding="24,8" Background="{StaticResource PrimaryBrush}" Foreground="White" Click="SaveNewEnclosure_Click"/>
                        </StackPanel>
                    </StackPanel>
                </Border>
            </Grid>
        </Grid>
</UserControl>